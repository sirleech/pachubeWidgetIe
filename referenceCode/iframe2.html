<html>
  <head>
  <script type="text/javascript" src="xmlhttp.js"></script>
  <script type="text/javascript">
    var AJAX_URL="http://www.fettig.net/playground/ajax-subdomain/ajaxdata.php";
    function getTime(){
      try {
        getUrl(AJAX_URL, gotTime);
      } catch(e) {
        // getUrl failed, probably because we're running in an older
        // Moz/Firefox/Gecko and we we've changed document.domain.
        // switch to the bridge hack (if we haven't already)
        if (window.bridgeGotTime) {
          throw e;
        } else {
          document.location.replace("test5-bridge.html");
        }
      }
    }
    function gotTime(status, headers, result) {
      var oldDomain = document.domain;
      if (window.bridgeGotTime) {
        window.bridgeGotTime(result);
      } else {
        document.domain = "fettig.net";
        window.parent.gotTime(result);
      }
      // try to set document.domain. this is needed for IE/Konq/Safari
      // it will fail in Gecko-based browsers, which is ok in ff > 1.5, but
      // which forces the use of a bridge iframe hack in earlier Geckos.
      try {
        document.domain = oldDomain;
      } catch (e) {}
      setTimeout(getTime, 1000);
 }
    getTime();
  </script>
  </head>
</html>